{% extends "base.html" %}
{% block content %}

<div class="container">
</br>
    <h4>Enter Username for Message History</h4>
</br>
    <form action="" method="POST" novalidate>
        {{ form.hidden_tag() }}
        <p>
            {{ form.search.label }} <br>
            {{ form.search(size=70) }}
        </p><br/>

        <p>
            {{ form.submit() }}
        </p>
    </form>
</br>

</br>
    <h4>Message History</h4>
</br>

{% if user_id == current_user.username or sent_id == current_user.username %}

{% for x in messages %}
<div class="p-3 py-5">
  {% if x.sent_id == current_user.username %}
  <div class="panel panel-primary">
    <div class="panel-heading" style="background-color:#5fa70d">From: {{ x.user_id }}</div>
    <div class="panel-body">{{x.content}}</div>
    <div class="panel-footer" style="text-align:right; backgroud-color:white;">
      <a href="/messagethis/{{x.user}}">Reply</a></div>

</div>
{% elif x.user_id == current_user.username %}
<div class="panel panel-primary">
  <div class="panel-heading">Sent to: {{ x.sent_id }}</div>
  <div class="panel-body">{{x.content}}</div>
  <div class="panel-footer" style="text-align:right; backgroud-color:white;">
    <a href="/messagethis/{{x.sent}}">Reply</a></div>

</div>
{% endif %}
</div>
{% endfor %}

    {% else %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        You do not have any Message History!
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
</div>

{% endif %}
</div>
{% endblock %}
